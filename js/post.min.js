function e(a){this.wiki=function(){this.encloseSelection("","",function(b){return f(a,b,!0)})};this.xhtml=function(){this.encloseSelection("","",function(b){return f(a,b,!1)})}}var g=/^\s*\(\(([^()|]+)(?:\|(?:[^)]|\)[^)])*)?\)\)\s*$/,h=/^\s*<img (?:[^>]* )?src=["']([^"'>]+)["'](?: [^>]*)?\/>\s*$/i;function k(a,b,c){b=b.match(c);return b?b[1]:(alert(a.selectImageError),null)}
function f(a,b,c){var d;d=c?k(a,b,g):k(a,b,h);if(!d)return b;a='<div class="dotsphere"></div><script src="'+(a.pluginUrl+"js/public.js").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")+'">\x3c/script><script>dotsphere({panorama: '+JSON.stringify(d)+"},"+JSON.stringify(a.pluginUrl+"js/")+")\x3c/script>";return c?"\n///html\n"+a+"\n///\n":a}
jsToolBar.prototype.elements.dotsphere=new function(){this.type="button";this.context="post";this.icon="index.php?pf=dotsphere/icon.png";this.fn=new e(this)};
